<div class="cart-header">
    <button class="back-btn" (click)="goToDashboard()">â¬… Back to Dashboard</button>
</div>

<div class="cart-container" *ngIf="cartItems.length > 0">
    <h2>Your Shopping Cart</h2>

    <div *ngFor="let item of cartItems" class="cart-item">
        <div class="cart-img">
            <img [src]="item.image_url || 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSoynwRmPGX5pY5OCBI8OjKtFgXhINHymrkjQ&s'"
                alt="{{ item.title }}" />
        </div>

        <div class="cart-info">
            <h3>{{ item.title }}</h3>
            <p class="price">â‚¹{{ item.price }}</p>
            <div class="quantity">
                <label>Qty:</label>

                <button [disabled]="item.quantity <= 1"
                    (click)="changeQuantity(item.product_id, item.quantity - 1)">âˆ’</button>


                <input #qtyInput type="number" [value]="item.quantity" min="1"
                    (change)="updateQuantity(item.product_id, qtyInput.value)" />

                <button (click)="changeQuantity(item.product_id, item.quantity + 1)">+</button>
            </div>

        </div>

        <div class="cart-actions">
            <p class="subtotal">Subtotal: â‚¹{{ item.subtotal }}</p>
            <button class="remove-btn" (click)="removeItem(item.product_id)">Remove</button>
        </div>
    </div>

    <div class="total-section">
        <h3>Total: â‚¹{{ totalAmount }}</h3>
        <button class="checkout-btn" (click)="proceedToCheckout()">Proceed to Checkout</button>
    </div>
</div>

<div *ngIf="loading" class="loading">Loading cart...</div>
<div *ngIf="!loading && cartItems.length === 0 && !error" class="empty">
    ðŸ›’ Your cart is empty. Start shopping!
</div>

<div *ngIf="error" class="error">{{ error }}</div>